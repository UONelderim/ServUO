using System;

using Server;
using Server.Mobiles;
using Server.Items;
using Server.SkillHandlers;
using Server.Network;
using Server.Gumps;
using Server.Engines.Quests;

namespace Server.Engines.Khaldun
{
    public class BaseGumshoeForensicItem : Item, IForensicTarget
    {
        readonly string m_ItemName;
        readonly int m_Cliloc;

        public override bool DisplayWeight { get { return false; } }

        public BaseGumshoeForensicItem(int itemID, string itemName, int cliloc)
            : base(itemID)
        {
            Movable = false;

            m_ItemName = itemName;
            m_Cliloc = cliloc;
        }

        public void OnForensicEval(Mobile m)
        {
            if (!m.Player)
                return;

            var quest = QuestHelper.GetQuest<GoingGumshoeQuest2>((PlayerMobile)m);

            if (quest != null)
            {
                m.PrivateOverheadMessage(MessageType.Regular, 0x47E, 1157722, "Forensics", m.NetState); // *Your proficiency in ~1_SKILL~ reveals more about the item*
                m.SendLocalizedMessage(1158612, null, 0x23); // You have identified a clue! This item seems pertinent to the investigation!

                m.SendSound(quest.UpdateSound);
                m.SendSound(m.Female ? 0x30B : 0x41A);

                m.CloseGump(typeof(GumshoeItemGump));
                m.SendGump(new GumshoeItemGump(m, ItemID, Hue, m_ItemName, m_Cliloc, null));
            }
        }

        public BaseGumshoeForensicItem(Serial serial)
            : base(serial)
        {
        }

        public override void Serialize(GenericWriter writer)
        {
            base.Serialize(writer);

            writer.Write((int)0); // version
        }

        public override void Deserialize(GenericReader reader)
        {
            base.Deserialize(reader);

            int version = reader.ReadInt();
        }
    }

    public class GumshoeBottles : BaseGumshoeForensicItem
    {
        [Constructable]
        public GumshoeBottles()
            : base(0x9C5, "bottles of wine", 1158572)
        {
        }

        public GumshoeBottles(Serial serial)
            : base(serial)
        {
        }

        public override void Serialize(GenericWriter writer)
        {
            base.Serialize(writer);

            writer.Write((int)0); // version
        }

        public override void Deserialize(GenericReader reader)
        {
            base.Deserialize(reader);

            int version = reader.ReadInt();
        }
    }

    public class GumshoeDeed : BaseGumshoeForensicItem
    {
        [Constructable]
        public GumshoeDeed()
            : base(0x14EF, "deed", 1158575)
        {
        }

        public GumshoeDeed(Serial serial)
            : base(serial)
        {
        }

        public override void Serialize(GenericWriter writer)
        {
            base.Serialize(writer);

            writer.Write((int)0); // version
        }

        public override void Deserialize(GenericReader reader)
        {
            base.Deserialize(reader);

            int version = reader.ReadInt();
        }
    }

    public class GumshoeRope : BaseGumshoeForensicItem
    {
        [Constructable]
        public GumshoeRope()
            : base(0x14FA, "rope", 1158573)
        {
        }

        public GumshoeRope(Serial serial)
            : base(serial)
        {
        }

        public override void Serialize(GenericWriter writer)
        {
            base.Serialize(writer);

            writer.Write((int)0); // version
        }

        public override void Deserialize(GenericReader reader)
        {
            base.Deserialize(reader);

            int version = reader.ReadInt();
        }
    }

    public class GumshoeMap : BaseGumshoeForensicItem
    {
        [Constructable]
        public GumshoeMap()
            : base(0x14EB, "map", 1158574)
        {
        }

        public GumshoeMap(Serial serial)
            : base(serial)
        {
        }

        public override void Serialize(GenericWriter writer)
        {
            base.Serialize(writer);

            writer.Write((int)0); // version
        }

        public override void Deserialize(GenericReader reader)
        {
            base.Deserialize(reader);

            int version = reader.ReadInt();
        }
    }

    public class GumshoeTools : BaseGumshoeForensicItem
    {
        [Constructable]
        public GumshoeTools()
            : base(0x1EBB, "tools", 1158576)
        {
        }

        public GumshoeTools(Serial serial)
            : base(serial)
        {
        }

        public override void Serialize(GenericWriter writer)
        {
            base.Serialize(writer);

            writer.Write((int)0); // version
        }

        public override void Deserialize(GenericReader reader)
        {
            base.Deserialize(reader);

            int version = reader.ReadInt();
        }
    }
}
